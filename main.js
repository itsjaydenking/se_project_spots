!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error"},r=(e,t,r)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(r.inputErrorClass)},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},a=(e,t,r)=>{(e=>e.some(e=>!e.validity.valid))(e)?n(t,r):((e,t)=>{e.disabled=!1,e.classList.remove(t.inactiveButtonClass)})(t,r)},o=(e,t)=>{Array.from(e.querySelectorAll(t.inputSelector)).forEach(n=>{r(e,n,t)}),n(e.querySelector(t.submitButtonSelector),t)};function i(e,t,r="Save",n="Saving..."){e?(t.textContent=n,t.disabled=!0):(t.textContent=r,t.disabled=!1)}function s(e,t,r="Saving..."){t.preventDefault();const n=t.submitter,a=n.textContent;i(!0,n,a,r),e().then(()=>{t.target.reset()}).catch(console.error).finally(()=>{i(!1,n,a)})}const c=e=>{e.classList.add("modal_is-opened"),document.addEventListener("keydown",u)},d=e=>{e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",u)},l=()=>{document.querySelectorAll(".modal_is-opened").forEach(d)};function u(e){"Escape"===e.key&&l()}const _=(e,t=document)=>t.querySelector(e);var m=e+"8bd92903aece9fed9ac5.svg",p=e+"350cd634429859fefcee.png",v=e+"3f562ce83766a824571e.svg",f=e+"975792ea68af0a3c209d.svg",h=e+"d73f076c46eb5467f5fc.svg";document.querySelector(".header__logo").src=m,document.querySelector(".profile__avatar").src=p,document.querySelector(".profile__edit-icon").src=v,document.querySelector(".profile__new-post-icon").src=f,document.querySelector(".profile__pencil-icon").src=h;const b=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t={}){return fetch(`${this._baseUrl}${e}`,{headers:this._headers,...t}).then(this._checkResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return this._request("/cards")}getUserInfo(){return this._request("/users/me")}editUserInfo({name:e,about:t}){return this._request("/users/me",{method:"PATCH",body:JSON.stringify({name:e,about:t})})}updateUserAvatar({avatar:e}){return this._request("/users/me/avatar",{method:"PATCH",body:JSON.stringify({avatar:e})})}postNewCard(e){return this._request("/cards",{method:"POST",body:JSON.stringify(e)})}deleteCard(e){return this._request(`/cards/${e}`,{method:"DELETE"})}likeCard(e){return this._request(`/cards/${e}/likes`,{method:"PUT"})}dislikeCard(e){return this._request(`/cards/${e}/likes`,{method:"DELETE"})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"57edc072-caed-4edd-a330-de0f2db62a71","Content-Type":"application/json"}});let k=null,E=null;const y=e=>{_(".modal__close-btn",e).addEventListener("click",()=>d(e)),e.addEventListener("click",t=>{t.target===e&&d(e)})},C=_("#edit-profile-modal"),L=_("#new-post-modal"),S=_("#preview-modal"),g=_("#avatar-modal"),q=_("#delete-modal"),x=_(".profile__edit-button"),A=_(".modal__form",C),w=_("#profile-name-input",C),U=_("#profile-description-input",C),I=_(".profile__name"),$=_(".profile__description"),T=_(".profile__avatar"),B=_(".profile__avatar-button"),N=_(".modal__form",g),P=_("#avatar-input",g),D=_(".profile__new-post-button"),O=_(".modal__form",L),j=_("#image-link-input",L),J=_("#image-caption-input",L),H=_(".modal__submit-btn_type_delete",q),R=_(".modal__submit-btn_type_cancel",q),z=_("#card-template").content.querySelector(".card"),M=_(".cards__list");function F(e){const t=z.cloneNode(!0),r=_(".card__image",t),n=_(".card__title",t),a=_(".card__like-button",t),o=_(".card__delete-button",t);return r.src=e.link,r.alt=e.name,n.textContent=e.name,t.dataset.cardId=e._id,e.isLiked&&a.classList.add("card__like-button_active"),a.addEventListener("click",()=>{const t=e._id;a.classList.contains("card__like-button_active")?b.dislikeCard(t).then(()=>{a.classList.remove("card__like-button_active"),e.isLiked=!1}).catch(e=>{console.error("Error disliking card:",e)}):b.likeCard(t).then(()=>{a.classList.add("card__like-button_active"),e.isLiked=!0}).catch(e=>{console.error("Error liking card:",e)})}),o.addEventListener("click",()=>{E=t,c(q)}),r.addEventListener("click",()=>{const t=_("#preview-image",S),r=_("#preview-caption",S);t.src=e.link,t.alt=e.name,r.textContent=e.name,c(S)}),t}y(C),y(L),y(S),y(g),y(q),b.getAppInfo().then(([e,t])=>{k=t,e.forEach(e=>{M.append(F(e))}),I.textContent=t.name,$.textContent=t.about,T.src=t.avatar}).catch(e=>{console.error("Error loading app data:",e)}),x.addEventListener("click",()=>{w.value=I.textContent,U.value=$.textContent,o(A,t),c(C)}),A.addEventListener("submit",function(e){s(function(){return b.editUserInfo({name:w.value,about:U.value}).then(e=>{I.textContent=e.name,$.textContent=e.about,d(C)})},e)}),B.addEventListener("click",()=>{o(N,t),c(g)}),N.addEventListener("submit",function(e){s(function(){return b.updateUserAvatar({avatar:P.value}).then(e=>{T.src=e.avatar,d(g)})},e)}),D.addEventListener("click",()=>c(L)),O.addEventListener("submit",function(e){s(function(){const e={name:J.value,link:j.value};return b.postNewCard(e).then(e=>{M.prepend(F(e)),o(O,t),d(L)})},e)}),H.addEventListener("click",function(e){if(e.preventDefault(),E){const t=E.dataset.cardId,r=e.target,n=r.textContent;i(!0,r,n,"Deleting..."),b.deleteCard(t).then(()=>{E.remove(),E=null,d(q)}).catch(console.error).finally(()=>{i(!1,r,n)})}}),R.addEventListener("click",()=>{E=null,d(q)}),(e=>{document.querySelectorAll(e.formSelector).forEach(t=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);a(n,o,t),n.forEach(i=>{i.addEventListener("input",function(){((e,t,n)=>{t.validity.valid?r(e,t,n):((e,t,r,n)=>{const a=e.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),a.textContent=r})(e,t,t.validationMessage,n)})(e,i,t),a(n,o,t)})})})(t,e)})})(t)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdXRpbHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8vID09PSBDT05GSUcgPT09XHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG4vLyA9PT0gU0hPVyAvIEhJREUgRVJST1IgPT09XHJcbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG4vLyA9PT0gQ0hFQ0sgSU5QVVQgVkFMSURJVFkgPT09XHJcbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihcclxuICAgICAgZm9ybUVsZW1lbnQsXHJcbiAgICAgIGlucHV0RWxlbWVudCxcclxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxyXG4gICAgICBzZXR0aW5nc1xyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+XHJcbiAgaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4vLyA9PT0gRU5BQkxFIC8gRElTQUJMRSBCVVRUT05TID09PVxyXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgZW5hYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBlbmFibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vID09PSBSRVNFVCBWQUxJREFUSU9OID09PVxyXG5jb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICApO1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9KTtcclxuICBkaXNhYmxlQnV0dG9uKFxyXG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvciksXHJcbiAgICBzZXR0aW5nc1xyXG4gICk7XHJcbn07XHJcblxyXG4vLyA9PT0gU0VUIEVWRU5UIExJU1RFTkVSUyA9PT1cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICApO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICApO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyA9PT0gRU5BQkxFIFZBTElEQVRJT04gPT09XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9KTtcclxufTtcclxuXHJcblxyXG5cclxuZXhwb3J0IHtlbmFibGVWYWxpZGF0aW9uLCByZXNldFZhbGlkYXRpb24sIHNldHRpbmdzfTsiLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMT0FESU5HIFNUQVRFIFVUSUxJVElFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhcbiAgaXNMb2FkaW5nLFxuICBidXR0b24sXG4gIGJ1dHRvblRleHQgPSBcIlNhdmVcIixcbiAgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiXG4pIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIGV2dCwgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgZm9ybSBzdWJtaXNzaW9uXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIC8vIEdldCB0aGUgc3VibWl0IGJ1dHRvbiBmcm9tIHRoZSBldmVudFxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xuICAvLyBTdG9yZSB0aGUgaW5pdGlhbCBidXR0b24gdGV4dFxuICBjb25zdCBpbml0aWFsVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcblxuICAvLyBTZXQgbG9hZGluZyBzdGF0ZVxuICByZW5kZXJMb2FkaW5nKHRydWUsIHN1Ym1pdEJ1dHRvbiwgaW5pdGlhbFRleHQsIGxvYWRpbmdUZXh0KTtcblxuICAvLyBFeGVjdXRlIHRoZSByZXF1ZXN0XG4gIHJlcXVlc3QoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIC8vIFJlc2V0IHRoZSBmb3JtIGFmdGVyIHN1Y2Nlc3NmdWwgc3VibWlzc2lvblxuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgLy8gUmVzZXQgYnV0dG9uIHN0YXRlXG4gICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBzdWJtaXRCdXR0b24sIGluaXRpYWxUZXh0KTtcbiAgICB9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTU9EQUwgVVRJTElUSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBvcGVuTW9kYWwgPSAobW9kYWwpID0+IHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjbG9zZU1vZGFsID0gKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59O1xuXG5leHBvcnQgY29uc3QgY2xvc2VBbGxNb2RhbHMgPSAoKSA9PiB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfaXMtb3BlbmVkXCIpLmZvckVhY2goY2xvc2VNb2RhbCk7XG59O1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZSkge1xuICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjbG9zZUFsbE1vZGFscygpO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIERPTSBVVElMSVRJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHFzID0gKHNlbGVjdG9yLCBwYXJlbnQgPSBkb2N1bWVudCkgPT5cbiAgcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuIiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU1QT1JUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgcmVzZXRWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgaGFuZGxlU3VibWl0LFxuICByZW5kZXJMb2FkaW5nLFxuICBvcGVuTW9kYWwsXG4gIGNsb3NlTW9kYWwsXG4gIHFzLFxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgbG9nbyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XG5pbXBvcnQgYXZhdGFyIGZyb20gXCIuLi9pbWFnZXMvamF5ZGVuS2luZy5wbmdcIjtcbmltcG9ydCBlZGl0SWNvbiBmcm9tIFwiLi4vaW1hZ2VzL2VkaXQtaWNvbi5zdmdcIjtcbmltcG9ydCBwbHVzSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMtaWNvbi5zdmdcIjtcbmltcG9ydCBlZGl0SWNvbkxpZ2h0IGZyb20gXCIuLi9pbWFnZXMvZWRpdC1pY29uLWxpZ2h0LnN2Z1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIElOSVRJQUwgU0VUVVAgJiBJTUFHRSBMT0FESU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbG9nb1wiKS5zcmMgPSBsb2dvO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIikuc3JjID0gYXZhdGFyO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWljb25cIikuc3JjID0gZWRpdEljb247XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWljb25cIikuc3JjID0gcGx1c0ljb247XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BlbmNpbC1pY29uXCIpLnNyYyA9IGVkaXRJY29uTGlnaHQ7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFQSSBDT05GSUdVUkFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI1N2VkYzA3Mi1jYWVkLTRlZGQtYTMzMC1kZTBmMmRiNjJhNzFcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHTE9CQUwgVkFSSUFCTEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5sZXQgY3VycmVudFVzZXIgPSBudWxsO1xubGV0IGNhcmRUb0RlbGV0ZSA9IG51bGw7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJVFkgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBzZXR1cE1vZGFsQ2xvc2UgPSAobW9kYWwpID0+IHtcbiAgcXMoXCIubW9kYWxfX2Nsb3NlLWJ0blwiLCBtb2RhbCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgY2xvc2VNb2RhbChtb2RhbClcbiAgKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbCkgY2xvc2VNb2RhbChtb2RhbCk7XG4gIH0pO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRE9NIEVMRU1FTlQgU0VMRUNUT1JTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vID09PSBNT0RBTFMgPT09XG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gcXMoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdE1vZGFsID0gcXMoXCIjbmV3LXBvc3QtbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWwgPSBxcyhcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgYXZhdGFyTW9kYWwgPSBxcyhcIiNhdmF0YXItbW9kYWxcIik7XG5jb25zdCBkZWxldGVNb2RhbCA9IHFzKFwiI2RlbGV0ZS1tb2RhbFwiKTtcblxuLy8gPT09IFBST0ZJTEUgRUxFTUVOVFMgPT09XG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IHFzKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUZvcm0gPSBxcyhcIi5tb2RhbF9fZm9ybVwiLCBlZGl0UHJvZmlsZU1vZGFsKTtcbmNvbnN0IG5hbWVJbnB1dCA9IHFzKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiLCBlZGl0UHJvZmlsZU1vZGFsKTtcbmNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBxcyhcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIsIGVkaXRQcm9maWxlTW9kYWwpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBxcyhcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gcXMoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gcXMoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuXG4vLyA9PT0gQVZBVEFSIEVMRU1FTlRTID09PVxuY29uc3QgYXZhdGFyQnV0dG9uID0gcXMoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhckZvcm0gPSBxcyhcIi5tb2RhbF9fZm9ybVwiLCBhdmF0YXJNb2RhbCk7XG5jb25zdCBhdmF0YXJJbnB1dCA9IHFzKFwiI2F2YXRhci1pbnB1dFwiLCBhdmF0YXJNb2RhbCk7XG5cbi8vID09PSBORVcgUE9TVCBFTEVNRU5UUyA9PT1cbmNvbnN0IG5ld1Bvc3RCdXR0b24gPSBxcyhcIi5wcm9maWxlX19uZXctcG9zdC1idXR0b25cIik7XG5jb25zdCBhZGRDYXJkRm9ybSA9IHFzKFwiLm1vZGFsX19mb3JtXCIsIG5ld1Bvc3RNb2RhbCk7XG5jb25zdCBsaW5rSW5wdXQgPSBxcyhcIiNpbWFnZS1saW5rLWlucHV0XCIsIG5ld1Bvc3RNb2RhbCk7XG5jb25zdCBjYXB0aW9uSW5wdXQgPSBxcyhcIiNpbWFnZS1jYXB0aW9uLWlucHV0XCIsIG5ld1Bvc3RNb2RhbCk7XG5cbi8vID09PSBERUxFVEUgQ09ORklSTUFUSU9OIEVMRU1FTlRTID09PVxuY29uc3QgZGVsZXRlQ29uZmlybUJ1dHRvbiA9IHFzKFwiLm1vZGFsX19zdWJtaXQtYnRuX3R5cGVfZGVsZXRlXCIsIGRlbGV0ZU1vZGFsKTtcbmNvbnN0IGRlbGV0ZUNhbmNlbEJ1dHRvbiA9IHFzKFwiLm1vZGFsX19zdWJtaXQtYnRuX3R5cGVfY2FuY2VsXCIsIGRlbGV0ZU1vZGFsKTtcblxuLy8gPT09IENBUkQgVEVNUExBVEUgQU5EIExJU1QgPT09XG5jb25zdCBjYXJkVGVtcGxhdGUgPSBxcyhcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gcXMoXCIuY2FyZHNfX2xpc3RcIik7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1PREFMIFNFVFVQXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5zZXR1cE1vZGFsQ2xvc2UoZWRpdFByb2ZpbGVNb2RhbCk7XG5zZXR1cE1vZGFsQ2xvc2UobmV3UG9zdE1vZGFsKTtcbnNldHVwTW9kYWxDbG9zZShwcmV2aWV3TW9kYWwpO1xuc2V0dXBNb2RhbENsb3NlKGF2YXRhck1vZGFsKTtcbnNldHVwTW9kYWxDbG9zZShkZWxldGVNb2RhbCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENBUkQgQ1JFQVRJT04gRlVOQ1RJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmZ1bmN0aW9uIGNyZWF0ZUNhcmRFbGVtZW50KGNhcmREYXRhKSB7XG4gIC8vIENsb25lIGNhcmQgdGVtcGxhdGVcbiAgY29uc3QgY2FyZCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IHFzKFwiLmNhcmRfX2ltYWdlXCIsIGNhcmQpO1xuICBjb25zdCBjYXJkVGl0bGUgPSBxcyhcIi5jYXJkX190aXRsZVwiLCBjYXJkKTtcbiAgY29uc3QgbGlrZUJ1dHRvbiA9IHFzKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIsIGNhcmQpO1xuICBjb25zdCBkZWxldGVCdXR0b24gPSBxcyhcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIsIGNhcmQpO1xuXG4gIC8vIFNldCBjYXJkIGNvbnRlbnRcbiAgY2FyZEltYWdlLnNyYyA9IGNhcmREYXRhLmxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSBjYXJkRGF0YS5uYW1lO1xuICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuICBjYXJkLmRhdGFzZXQuY2FyZElkID0gY2FyZERhdGEuX2lkO1xuXG4gIC8vIENoZWNrIGlmIGNhcmQgaXMgYWxyZWFkeSBsaWtlZCBieSBjdXJyZW50IHVzZXJcbiAgY29uc3QgaXNMaWtlZCA9IGNhcmREYXRhLmlzTGlrZWQ7XG5cbiAgLy8gU2V0IGluaXRpYWwgbGlrZSBzdGF0ZVxuICBpZiAoaXNMaWtlZCkge1xuICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8vID09PSBDQVJEIEVWRU5UIExJU1RFTkVSUyA9PT1cblxuICAvLyBMaWtlL1VubGlrZSBmdW5jdGlvbmFsaXR5XG4gIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBjYXJkSWQgPSBjYXJkRGF0YS5faWQ7XG4gICAgY29uc3QgaXNMaWtlZCA9IGxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuXG4gICAgaWYgKGlzTGlrZWQpIHtcbiAgICAgIC8vIERpc2xpa2UgdGhlIGNhcmRcbiAgICAgIGFwaVxuICAgICAgICAuZGlzbGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8gUmVtb3ZlIHVwZGF0ZWRDYXJkIHBhcmFtZXRlclxuICAgICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICAgICAgICBjYXJkRGF0YS5pc0xpa2VkID0gZmFsc2U7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRpc2xpa2luZyBjYXJkOlwiLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGlrZSB0aGUgY2FyZFxuICAgICAgYXBpXG4gICAgICAgIC5saWtlQ2FyZChjYXJkSWQpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAvLyBSZW1vdmUgdXBkYXRlZENhcmQgcGFyYW1ldGVyXG4gICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgICAgIGNhcmREYXRhLmlzTGlrZWQgPSB0cnVlO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsaWtpbmcgY2FyZDpcIiwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBEZWxldGUgY2FyZCBmdW5jdGlvbmFsaXR5XG4gIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRUb0RlbGV0ZSA9IGNhcmQ7XG4gICAgb3Blbk1vZGFsKGRlbGV0ZU1vZGFsKTtcbiAgfSk7XG5cbiAgLy8gSW1hZ2UgcHJldmlldyBmdW5jdGlvbmFsaXR5XG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHByZXZpZXdJbWFnZSA9IHFzKFwiI3ByZXZpZXctaW1hZ2VcIiwgcHJldmlld01vZGFsKTtcbiAgICBjb25zdCBwcmV2aWV3Q2FwdGlvbiA9IHFzKFwiI3ByZXZpZXctY2FwdGlvblwiLCBwcmV2aWV3TW9kYWwpO1xuXG4gICAgcHJldmlld0ltYWdlLnNyYyA9IGNhcmREYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gICAgcHJldmlld0NhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUEkgREFUQSBMT0FESU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5hcGlcbiAgLmdldEFwcEluZm8oKVxuICAudGhlbigoW2NhcmRzLCB1c2VySW5mb10pID0+IHtcbiAgICAvLyBTdG9yZSB1c2VyIGluZm8gZ2xvYmFsbHlcbiAgICBjdXJyZW50VXNlciA9IHVzZXJJbmZvO1xuXG4gICAgLy8gUmVuZGVyIGNhcmRzXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFwcGVuZChjcmVhdGVDYXJkRWxlbWVudChjYXJkKSk7XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgcHJvZmlsZSBpbmZvcm1hdGlvblxuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VySW5mby5hYm91dDtcbiAgICBwcm9maWxlQXZhdGFyLnNyYyA9IHVzZXJJbmZvLmF2YXRhcjtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBhcHAgZGF0YTpcIiwgZXJyKTtcbiAgfSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZPUk0gU1VCTUlUIEhBTkRMRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vID09PSBQUk9GSUxFIEZPUk0gU1VCTUlUID09PVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIHJldHVybiBhcGlcbiAgICAgIC5lZGl0VXNlckluZm8oeyBuYW1lOiBuYW1lSW5wdXQudmFsdWUsIGFib3V0OiBkZXNjcmlwdGlvbklucHV0LnZhbHVlIH0pXG4gICAgICAudGhlbigodXNlckluZm8pID0+IHtcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xuICAgICAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VySW5mby5hYm91dDtcbiAgICAgICAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbiAgICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZXZ0KTtcbn1cblxuLy8gPT09IEFWQVRBUiBGT1JNIFNVQk1JVCA9PT1cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZXZ0KSB7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIHJldHVybiBhcGlcbiAgICAgIC51cGRhdGVVc2VyQXZhdGFyKHsgYXZhdGFyOiBhdmF0YXJJbnB1dC52YWx1ZSB9KVxuICAgICAgLnRoZW4oKHVzZXJJbmZvKSA9PiB7XG4gICAgICAgIHByb2ZpbGVBdmF0YXIuc3JjID0gdXNlckluZm8uYXZhdGFyO1xuICAgICAgICBjbG9zZU1vZGFsKGF2YXRhck1vZGFsKTtcbiAgICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZXZ0KTtcbn1cblxuLy8gPT09IE5FVyBQT1NUIEZPUk0gU1VCTUlUID09PVxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIGNvbnN0IG5ld0NhcmREYXRhID0ge1xuICAgICAgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLFxuICAgICAgbGluazogbGlua0lucHV0LnZhbHVlLFxuICAgIH07XG5cbiAgICByZXR1cm4gYXBpLnBvc3ROZXdDYXJkKG5ld0NhcmREYXRhKS50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZERhdGEpKTtcbiAgICAgIHJlc2V0VmFsaWRhdGlvbihhZGRDYXJkRm9ybSwgc2V0dGluZ3MpO1xuICAgICAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZXZ0KTtcbn1cblxuLy8gPT09IERFTEVURSBDT05GSVJNQVRJT04gU1VCTUlUID09PVxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBpZiAoY2FyZFRvRGVsZXRlKSB7XG4gICAgY29uc3QgY2FyZElkID0gY2FyZFRvRGVsZXRlLmRhdGFzZXQuY2FyZElkO1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGV2dC50YXJnZXQ7XG4gICAgY29uc3QgaW5pdGlhbFRleHQgPSBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG5cbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIHN1Ym1pdEJ1dHRvbiwgaW5pdGlhbFRleHQsIFwiRGVsZXRpbmcuLi5cIik7XG5cbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZFRvRGVsZXRlLnJlbW92ZSgpO1xuICAgICAgICBjYXJkVG9EZWxldGUgPSBudWxsO1xuICAgICAgICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgc3VibWl0QnV0dG9uLCBpbml0aWFsVGV4dCk7XG4gICAgICB9KTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFVkVOVCBMSVNURU5FUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gPT09IFBST0ZJTEUgRURJVElORyA9PT1cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24ocHJvZmlsZUZvcm0sIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbnByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuXG4vLyA9PT0gQVZBVEFSIEVESVRJTkcgPT09XG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcmVzZXRWYWxpZGF0aW9uKGF2YXRhckZvcm0sIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuXG5hdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XG5cbi8vID09PSBORVcgUE9TVCBDUkVBVElPTiA9PT1cbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpKTtcblxuYWRkQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0Rm9ybVN1Ym1pdCk7XG5cbi8vID09PSBDQVJEIERFTEVUSU9OID09PVxuZGVsZXRlQ29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uKTtcblxuZGVsZXRlQ2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNhcmRUb0RlbGV0ZSA9IG51bGw7XG4gIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIElOSVRJQUxJWkFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFBSSVZBVEUgSEVMUEVSIE1FVEhPRFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBfcmVxdWVzdChlbmRwb2ludCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtlbmRwb2ludH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBQVUJMSUMgQVBJIE1FVEhPRFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8vID09PSBEQVRBIEZFVENISU5HID09PVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi9jYXJkc1wiKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIpO1xuICB9XG5cbiAgLy8gPT09IFVTRVIgUFJPRklMRSBNQU5BR0VNRU5UID09PVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZVwiLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSksXG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vID09PSBDQVJEIE1BTkFHRU1FTlQgPT09XG5cbiAgcG9zdE5ld0NhcmQoY2FyZERhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi9jYXJkc1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEpLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgfVxuXG4gIC8vID09PSBMSUtFIEZVTkNUSU9OQUxJVFkgPT09XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgfSk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImRpc2FibGVCdXR0b24iLCJidXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJhZGQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZW5hYmxlQnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYnV0dG9uIiwiYnV0dG9uVGV4dCIsImxvYWRpbmdUZXh0IiwiaGFuZGxlU3VibWl0IiwicmVxdWVzdCIsImV2dCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0QnV0dG9uIiwic3VibWl0dGVyIiwiaW5pdGlhbFRleHQiLCJ0aGVuIiwidGFyZ2V0IiwicmVzZXQiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImZpbmFsbHkiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUVzY2FwZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VBbGxNb2RhbHMiLCJlIiwia2V5IiwicXMiLCJzZWxlY3RvciIsInBhcmVudCIsInNyYyIsImxvZ28iLCJhdmF0YXIiLCJlZGl0SWNvbiIsInBsdXNJY29uIiwiZWRpdEljb25MaWdodCIsImFwaSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsImVuZHBvaW50IiwiZmV0Y2giLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJlZGl0VXNlckluZm8iLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVVzZXJBdmF0YXIiLCJwb3N0TmV3Q2FyZCIsImNhcmREYXRhIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJhdXRob3JpemF0aW9uIiwiY3VycmVudFVzZXIiLCJjYXJkVG9EZWxldGUiLCJzZXR1cE1vZGFsQ2xvc2UiLCJlZGl0UHJvZmlsZU1vZGFsIiwibmV3UG9zdE1vZGFsIiwicHJldmlld01vZGFsIiwiYXZhdGFyTW9kYWwiLCJkZWxldGVNb2RhbCIsImVkaXRQcm9maWxlQnV0dG9uIiwicHJvZmlsZUZvcm0iLCJuYW1lSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlQXZhdGFyIiwiYXZhdGFyQnV0dG9uIiwiYXZhdGFyRm9ybSIsImF2YXRhcklucHV0IiwibmV3UG9zdEJ1dHRvbiIsImFkZENhcmRGb3JtIiwibGlua0lucHV0IiwiY2FwdGlvbklucHV0IiwiZGVsZXRlQ29uZmlybUJ1dHRvbiIsImRlbGV0ZUNhbmNlbEJ1dHRvbiIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjYXJkc0xpc3QiLCJjcmVhdGVDYXJkRWxlbWVudCIsImNhcmQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJsaWtlQnV0dG9uIiwiZGVsZXRlQnV0dG9uIiwibGluayIsImFsdCIsImRhdGFzZXQiLCJfaWQiLCJpc0xpa2VkIiwiY29udGFpbnMiLCJlcnIiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3Q2FwdGlvbiIsImNhcmRzIiwidXNlckluZm8iLCJhcHBlbmQiLCJ2YWx1ZSIsIm5ld0NhcmREYXRhIiwicHJlcGVuZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9