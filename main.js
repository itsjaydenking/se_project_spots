!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error"},r=(e,t,r)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(r.inputErrorClass)},a=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},o=(e,t,r)=>{(e=>e.some(e=>!e.validity.valid))(e)?a(t,r):((e,t)=>{e.disabled=!1,e.classList.remove(t.inactiveButtonClass)})(t,r)},s=(e,t)=>{Array.from(e.querySelectorAll(t.inputSelector)).forEach(a=>{r(e,a,t)}),a(e.querySelector(t.submitButtonSelector),t)};var n=e+"8bd92903aece9fed9ac5.svg",i=e+"350cd634429859fefcee.png",d=e+"3f562ce83766a824571e.svg",l=e+"975792ea68af0a3c209d.svg",c=e+"d73f076c46eb5467f5fc.svg";document.querySelector(".header__logo").src=n,document.querySelector(".profile__avatar").src=i,document.querySelector(".profile__edit-icon").src=d,document.querySelector(".profile__new-post-icon").src=l,document.querySelector(".profile__pencil-icon").src=c;const u=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}editUserInfo([e,t]){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}postNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}updateUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"57edc072-caed-4edd-a330-de0f2db62a71","Content-Type":"application/json"}});let _=null,m=null;const h=(e,t=document)=>t.querySelector(e),p=(e,t)=>{e.textContent=t,e.disabled=!0},v=(e,t)=>{e.textContent=t,e.disabled=!1},f=e=>{e.classList.add("modal_is-opened"),document.addEventListener("keydown",y)},b=e=>{e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",y)},E=e=>{h(".modal__close-btn",e).addEventListener("click",()=>b(e)),e.addEventListener("click",t=>{t.target===e&&b(e)})},k=()=>{document.querySelectorAll(".modal_is-opened").forEach(b)};function y(e){"Escape"===e.key&&k()}const S=h("#edit-profile-modal"),g=h("#new-post-modal"),C=h("#preview-modal"),L=h("#avatar-modal"),$=h("#delete-modal"),U=h(".profile__edit-button"),j=h(".modal__form",S),q=h("#profile-name-input",S),P=h("#profile-description-input",S),w=h(".profile__name"),x=h(".profile__description"),A=h(".profile__avatar"),I=h(".profile__avatar-button"),D=h(".modal__form",L),T=h("#avatar-input",L),B=h(".profile__new-post-button"),N=h(".modal__form",g),O=h("#image-link-input",g),J=h("#image-caption-input",g),H=(h(".modal__submit-btn",g),h(".modal__submit-btn_type_delete",$)),z=h(".modal__submit-btn_type_cancel",$),M=h("#card-template").content.querySelector(".card"),F=h(".cards__list");function G(e,t){const r=M.cloneNode(!0),a=h(".card__image",r),o=h(".card__title",r),s=h(".card__like-button",r),n=h(".card__delete-button",r);return a.src=e.link,a.alt=e.name,o.textContent=e.name,r.dataset.cardId=e._id,s.addEventListener("click",()=>{const t=e._id;s.classList.contains("card__like-button_active")?u.dislikeCard(t).then(t=>{s.classList.remove("card__like-button_active"),e.likes=t.likes}).catch(e=>{console.error("Error disliking card:",e)}):u.likeCard(t).then(t=>{s.classList.add("card__like-button_active"),e.likes=t.likes}).catch(e=>{console.error("Error liking card:",e)})}),n.addEventListener("click",()=>{m=r,f($)}),a.addEventListener("click",()=>{const t=h("#preview-image",C),r=h("#preview-caption",C);t.src=e.link,t.alt=e.name,r.textContent=e.name,f(C)}),r}E(S),E(g),E(C),E(L),E($),u.getAppInfo().then(([e,t])=>{_=t,e.forEach(e=>{F.append(G(e))}),w.textContent=t.name,x.textContent=t.about,A.src=t.avatar}).catch(e=>{console.error("Error loading app data:",e)}),U.addEventListener("click",()=>{q.value=w.textContent,P.value=x.textContent,s(j,t),f(S)}),j.addEventListener("submit",e=>{e.preventDefault();const t=h(".modal__submit-btn",j);p(t,"Saving..."),u.editUserInfo([q.value,P.value]).then(e=>{w.textContent=e.name,x.textContent=e.about,b(S)}).catch(e=>{console.error("Error updating profile:",e)}).finally(()=>{v(t,"Save")})}),I.addEventListener("click",()=>{s(D,t),f(L)}),D.addEventListener("submit",e=>{e.preventDefault();const t=h(".modal__submit-btn",D);p(t,"Saving..."),u.updateUserAvatar({avatar:T.value}).then(e=>{A.src=e.avatar,b(L),D.reset()}).catch(e=>{console.error("Error updating avatar:",e)}).finally(()=>{v(t,"Save")})}),B.addEventListener("click",()=>f(g)),N.addEventListener("submit",e=>{e.preventDefault();const r=h(".modal__submit-btn",N);p(r,"Saving...");const a={name:J.value,link:O.value};u.postNewCard(a).then(e=>{F.prepend(G(e)),N.reset(),s(N,t),b(g)}).catch(e=>{console.error("Error creating new post:",e)}).finally(()=>{v(r,"Save")})}),H.addEventListener("click",()=>{if(m){const e=m.dataset.cardId;p(H,"Deleting..."),u.deleteCard(e).then(()=>{m.remove(),m=null,b($)}).catch(e=>{console.error("Error deleting card:",e)}).finally(()=>{v(H,"Delete")})}}),z.addEventListener("click",()=>{m=null,b($)}),(e=>{document.querySelectorAll(e.formSelector).forEach(t=>{((e,t)=>{const a=Array.from(e.querySelectorAll(t.inputSelector)),s=e.querySelector(t.submitButtonSelector);o(a,s,t),a.forEach(n=>{n.addEventListener("input",function(){((e,t,a)=>{t.validity.valid?r(e,t,a):((e,t,r,a)=>{const o=e.querySelector(`#${t.id}-error`);t.classList.add(a.inputErrorClass),o.textContent=r})(e,t,t.validationMessage,a)})(e,n,t),o(a,s,t)})})})(t,e)})})(t)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCNUIsRUFBU0UsZ0JBRWxDYSxFQUFnQlIsRUFBWUUsY0FDaENULEVBQVNHLHNCQUdYZSxFQUFrQkMsRUFBV0osRUFBZWYsR0FFNUNtQixFQUFVVSxRQUFTckIsSUFDakJBLEVBQWE2RSxpQkFBaUIsUUFBUyxXQTdEaEJnRSxFQUFDOUksRUFBYUMsRUFBY1IsS0FDaERRLEVBQWFhLFNBQVNDLE1BUXpCaEIsRUFBZUMsRUFBYUMsRUFBY1IsR0F0QnZCc0osRUFBQy9JLEVBQWFDLEVBQWMrSSxFQUFjdkosS0FDL0QsTUFBTXdKLEVBQWVqSixFQUFZRSxjQUFjLElBQUlELEVBQWFFLFlBQ2hFRixFQUFhSSxVQUFVSyxJQUFJakIsRUFBU0ssaUJBQ3BDbUosRUFBYTdJLFlBQWM0SSxHQVl6QkQsQ0FDRS9JLEVBQ0FDLEVBQ0FBLEVBQWFpSixrQkFDYnpKLElBd0RBcUosQ0FBbUI5SSxFQUFhQyxFQUFjUixHQUM5Q2tCLEVBQWtCQyxFQUFXSixFQUFlZixFQUM5QyxNQVFBb0osQ0FBa0I3SSxFQUFhUCxNQ2lRbkMwSixDQUFpQjFKLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvLyA9PT0gQ09ORklHID09PVxyXG5jb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG59O1xyXG5cclxuLy8gPT09IFNIT1cgLyBISURFIEVSUk9SID09PVxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuLy8gPT09IENIRUNLIElOUFVUIFZBTElESVRZID09PVxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgIGZvcm1FbGVtZW50LFxyXG4gICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcclxuICAgICAgc2V0dGluZ3NcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PlxyXG4gIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG5cclxuLy8gPT09IEVOQUJMRSAvIERJU0FCTEUgQlVUVE9OUyA9PT1cclxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IGVuYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZW5hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyA9PT0gUkVTRVQgVkFMSURBVElPTiA9PT1cclxuY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgKTtcclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgfSk7XHJcbiAgZGlzYWJsZUJ1dHRvbihcclxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpLFxyXG4gICAgc2V0dGluZ3NcclxuICApO1xyXG59O1xyXG5cclxuLy8gPT09IFNFVCBFVkVOVCBMSVNURU5FUlMgPT09XHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgKTtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgKTtcclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncyk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gPT09IEVOQUJMRSBWQUxJREFUSU9OID09PVxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3Rvcik7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5cclxuXHJcbmV4cG9ydCB7ZW5hYmxlVmFsaWRhdGlvbiwgcmVzZXRWYWxpZGF0aW9uLCBzZXR0aW5nc307IiwiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU1QT1JUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgcmVzZXRWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBsb2dvIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcbmltcG9ydCBhdmF0YXIgZnJvbSBcIi4uL2ltYWdlcy9qYXlkZW5LaW5nLnBuZ1wiO1xuaW1wb3J0IGVkaXRJY29uIGZyb20gXCIuLi9pbWFnZXMvZWRpdC1pY29uLnN2Z1wiO1xuaW1wb3J0IHBsdXNJY29uIGZyb20gXCIuLi9pbWFnZXMvcGx1cy1pY29uLnN2Z1wiO1xuaW1wb3J0IGVkaXRJY29uTGlnaHQgZnJvbSBcIi4uL2ltYWdlcy9lZGl0LWljb24tbGlnaHQuc3ZnXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5JVElBTCBTRVRVUCAmIElNQUdFIExPQURJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19sb2dvXCIpLnNyYyA9IGxvZ287XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKS5zcmMgPSBhdmF0YXI7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtaWNvblwiKS5zcmMgPSBlZGl0SWNvbjtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmV3LXBvc3QtaWNvblwiKS5zcmMgPSBwbHVzSWNvbjtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGVuY2lsLWljb25cIikuc3JjID0gZWRpdEljb25MaWdodDtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVBJIENPTkZJR1VSQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjU3ZWRjMDcyLWNhZWQtNGVkZC1hMzMwLWRlMGYyZGI2MmE3MVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdMT0JBTCBWQVJJQUJMRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmxldCBjdXJyZW50VXNlciA9IG51bGw7XG5sZXQgY2FyZFRvRGVsZXRlID0gbnVsbDtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElUWSBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IHFzID0gKHNlbGVjdG9yLCBwYXJlbnQgPSBkb2N1bWVudCkgPT4gcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG5jb25zdCBzZXRCdXR0b25Mb2FkaW5nID0gKGJ1dHRvbiwgbG9hZGluZ1RleHQpID0+IHtcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG59O1xuXG5jb25zdCByZXNldEJ1dHRvblRleHQgPSAoYnV0dG9uLCBvcmlnaW5hbFRleHQpID0+IHtcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xuICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbn07XG5cbmNvbnN0IG9wZW5Nb2RhbCA9IChtb2RhbCkgPT4ge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpO1xufTtcblxuY29uc3QgY2xvc2VNb2RhbCA9IChtb2RhbCkgPT4ge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpO1xufTtcblxuY29uc3Qgc2V0dXBNb2RhbENsb3NlID0gKG1vZGFsKSA9PiB7XG4gIHFzKFwiLm1vZGFsX19jbG9zZS1idG5cIiwgbW9kYWwpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgIGNsb3NlTW9kYWwobW9kYWwpXG4gICk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9KTtcbn07XG5cbmNvbnN0IGNsb3NlQWxsTW9kYWxzID0gKCkgPT4ge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX2lzLW9wZW5lZFwiKS5mb3JFYWNoKGNsb3NlTW9kYWwpO1xufTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlKGUpIHtcbiAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY2xvc2VBbGxNb2RhbHMoKTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBET00gRUxFTUVOVCBTRUxFQ1RPUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gPT09IE1PREFMUyA9PT1cbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBxcyhcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5jb25zdCBuZXdQb3N0TW9kYWwgPSBxcyhcIiNuZXctcG9zdC1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbCA9IHFzKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBhdmF0YXJNb2RhbCA9IHFzKFwiI2F2YXRhci1tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZU1vZGFsID0gcXMoXCIjZGVsZXRlLW1vZGFsXCIpO1xuXG4vLyA9PT0gUFJPRklMRSBFTEVNRU5UUyA9PT1cbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gcXMoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IHFzKFwiLm1vZGFsX19mb3JtXCIsIGVkaXRQcm9maWxlTW9kYWwpO1xuY29uc3QgbmFtZUlucHV0ID0gcXMoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIsIGVkaXRQcm9maWxlTW9kYWwpO1xuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IHFzKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIiwgZWRpdFByb2ZpbGVNb2RhbCk7XG5jb25zdCBwcm9maWxlTmFtZSA9IHFzKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBxcyhcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVBdmF0YXIgPSBxcyhcIi5wcm9maWxlX19hdmF0YXJcIik7XG5cbi8vID09PSBBVkFUQVIgRUxFTUVOVFMgPT09XG5jb25zdCBhdmF0YXJCdXR0b24gPSBxcyhcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpO1xuY29uc3QgYXZhdGFyRm9ybSA9IHFzKFwiLm1vZGFsX19mb3JtXCIsIGF2YXRhck1vZGFsKTtcbmNvbnN0IGF2YXRhcklucHV0ID0gcXMoXCIjYXZhdGFyLWlucHV0XCIsIGF2YXRhck1vZGFsKTtcblxuLy8gPT09IE5FVyBQT1NUIEVMRU1FTlRTID09PVxuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IHFzKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRGb3JtID0gcXMoXCIubW9kYWxfX2Zvcm1cIiwgbmV3UG9zdE1vZGFsKTtcbmNvbnN0IGxpbmtJbnB1dCA9IHFzKFwiI2ltYWdlLWxpbmstaW5wdXRcIiwgbmV3UG9zdE1vZGFsKTtcbmNvbnN0IGNhcHRpb25JbnB1dCA9IHFzKFwiI2ltYWdlLWNhcHRpb24taW5wdXRcIiwgbmV3UG9zdE1vZGFsKTtcbmNvbnN0IGNhcmRTdWJtaXRCdXR0b24gPSBxcyhcIi5tb2RhbF9fc3VibWl0LWJ0blwiLCBuZXdQb3N0TW9kYWwpO1xuXG4vLyA9PT0gREVMRVRFIENPTkZJUk1BVElPTiBFTEVNRU5UUyA9PT1cbmNvbnN0IGRlbGV0ZUNvbmZpcm1CdXR0b24gPSBxcyhcIi5tb2RhbF9fc3VibWl0LWJ0bl90eXBlX2RlbGV0ZVwiLCBkZWxldGVNb2RhbCk7XG5jb25zdCBkZWxldGVDYW5jZWxCdXR0b24gPSBxcyhcIi5tb2RhbF9fc3VibWl0LWJ0bl90eXBlX2NhbmNlbFwiLCBkZWxldGVNb2RhbCk7XG5cbi8vID09PSBDQVJEIFRFTVBMQVRFIEFORCBMSVNUID09PVxuY29uc3QgY2FyZFRlbXBsYXRlID0gcXMoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IHFzKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNT0RBTCBTRVRVUFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuc2V0dXBNb2RhbENsb3NlKGVkaXRQcm9maWxlTW9kYWwpO1xuc2V0dXBNb2RhbENsb3NlKG5ld1Bvc3RNb2RhbCk7XG5zZXR1cE1vZGFsQ2xvc2UocHJldmlld01vZGFsKTtcbnNldHVwTW9kYWxDbG9zZShhdmF0YXJNb2RhbCk7XG5zZXR1cE1vZGFsQ2xvc2UoZGVsZXRlTW9kYWwpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDQVJEIENSRUFUSU9OIEZVTkNUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5mdW5jdGlvbiBjcmVhdGVDYXJkRWxlbWVudChjYXJkRGF0YSwgdXNlckluZm8pIHtcbiAgLy8gQ2xvbmUgY2FyZCB0ZW1wbGF0ZVxuICBjb25zdCBjYXJkID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZEltYWdlID0gcXMoXCIuY2FyZF9faW1hZ2VcIiwgY2FyZCk7XG4gIGNvbnN0IGNhcmRUaXRsZSA9IHFzKFwiLmNhcmRfX3RpdGxlXCIsIGNhcmQpO1xuICBjb25zdCBsaWtlQnV0dG9uID0gcXMoXCIuY2FyZF9fbGlrZS1idXR0b25cIiwgY2FyZCk7XG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHFzKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIiwgY2FyZCk7XG5cbiAgLy8gU2V0IGNhcmQgY29udGVudFxuICBjYXJkSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XG4gIGNhcmQuZGF0YXNldC5jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XG5cbiAgLy8gPT09IENBUkQgRVZFTlQgTElTVEVORVJTID09PVxuXG4gIC8vIExpa2UvVW5saWtlIGZ1bmN0aW9uYWxpdHlcbiAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNhcmRJZCA9IGNhcmREYXRhLl9pZDtcbiAgICBjb25zdCBpc0N1cnJlbnRseUxpa2VkID0gbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICBcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiXG4gICAgKTtcblxuICAgIGlmIChpc0N1cnJlbnRseUxpa2VkKSB7XG4gICAgICAvLyBEaXNsaWtlIHRoZSBjYXJkXG4gICAgICBhcGlcbiAgICAgICAgLmRpc2xpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XG4gICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgICAgIGNhcmREYXRhLmxpa2VzID0gdXBkYXRlZENhcmQubGlrZXM7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRpc2xpa2luZyBjYXJkOlwiLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGlrZSB0aGUgY2FyZFxuICAgICAgYXBpXG4gICAgICAgIC5saWtlQ2FyZChjYXJkSWQpXG4gICAgICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xuICAgICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICAgICAgICBjYXJkRGF0YS5saWtlcyA9IHVwZGF0ZWRDYXJkLmxpa2VzO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsaWtpbmcgY2FyZDpcIiwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBEZWxldGUgY2FyZCBmdW5jdGlvbmFsaXR5XG4gIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRUb0RlbGV0ZSA9IGNhcmQ7XG4gICAgb3Blbk1vZGFsKGRlbGV0ZU1vZGFsKTtcbiAgfSk7XG5cbiAgLy8gSW1hZ2UgcHJldmlldyBmdW5jdGlvbmFsaXR5XG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHByZXZpZXdJbWFnZSA9IHFzKFwiI3ByZXZpZXctaW1hZ2VcIiwgcHJldmlld01vZGFsKTtcbiAgICBjb25zdCBwcmV2aWV3Q2FwdGlvbiA9IHFzKFwiI3ByZXZpZXctY2FwdGlvblwiLCBwcmV2aWV3TW9kYWwpO1xuXG4gICAgcHJldmlld0ltYWdlLnNyYyA9IGNhcmREYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gICAgcHJldmlld0NhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUEkgREFUQSBMT0FESU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5hcGlcbiAgLmdldEFwcEluZm8oKVxuICAudGhlbigoW2NhcmRzLCB1c2VySW5mb10pID0+IHtcbiAgICAvLyBTdG9yZSB1c2VyIGluZm8gZ2xvYmFsbHlcbiAgICBjdXJyZW50VXNlciA9IHVzZXJJbmZvO1xuXG4gICAgLy8gUmVuZGVyIGNhcmRzXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFwcGVuZChjcmVhdGVDYXJkRWxlbWVudChjYXJkLCB1c2VySW5mbykpO1xuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHByb2ZpbGUgaW5mb3JtYXRpb25cbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJJbmZvLm5hbWU7XG4gICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckluZm8uYWJvdXQ7XG4gICAgcHJvZmlsZUF2YXRhci5zcmMgPSB1c2VySW5mby5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgYXBwIGRhdGE6XCIsIGVycik7XG4gIH0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFVkVOVCBMSVNURU5FUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gPT09IFBST0ZJTEUgRURJVElORyA9PT1cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24ocHJvZmlsZUZvcm0sIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbnByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBxcyhcIi5tb2RhbF9fc3VibWl0LWJ0blwiLCBwcm9maWxlRm9ybSk7XG5cbiAgc2V0QnV0dG9uTG9hZGluZyhzdWJtaXRCdXR0b24sIFwiU2F2aW5nLi4uXCIpO1xuXG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oW25hbWVJbnB1dC52YWx1ZSwgZGVzY3JpcHRpb25JbnB1dC52YWx1ZV0pXG4gICAgLnRoZW4oKHVzZXJJbmZvKSA9PiB7XG4gICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJJbmZvLm5hbWU7XG4gICAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VySW5mby5hYm91dDtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZXNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCBcIlNhdmVcIik7XG4gICAgfSk7XG59KTtcblxuLy8gPT09IEFWQVRBUiBFRElUSU5HID09PVxuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHJlc2V0VmFsaWRhdGlvbihhdmF0YXJGb3JtLCBzZXR0aW5ncyk7XG4gIG9wZW5Nb2RhbChhdmF0YXJNb2RhbCk7XG59KTtcblxuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gcXMoXCIubW9kYWxfX3N1Ym1pdC1idG5cIiwgYXZhdGFyRm9ybSk7XG5cbiAgc2V0QnV0dG9uTG9hZGluZyhzdWJtaXRCdXR0b24sIFwiU2F2aW5nLi4uXCIpO1xuXG4gIGFwaVxuICAgIC51cGRhdGVVc2VyQXZhdGFyKHsgYXZhdGFyOiBhdmF0YXJJbnB1dC52YWx1ZSB9KVxuICAgIC50aGVuKCh1c2VySW5mbykgPT4ge1xuICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSB1c2VySW5mby5hdmF0YXI7XG4gICAgICBjbG9zZU1vZGFsKGF2YXRhck1vZGFsKTtcbiAgICAgIGF2YXRhckZvcm0ucmVzZXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgYXZhdGFyOlwiLCBlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVzZXRCdXR0b25UZXh0KHN1Ym1pdEJ1dHRvbiwgXCJTYXZlXCIpO1xuICAgIH0pO1xufSk7XG5cbi8vID09PSBORVcgUE9TVCBDUkVBVElPTiA9PT1cbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpKTtcblxuYWRkQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHFzKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsIGFkZENhcmRGb3JtKTtcblxuICBzZXRCdXR0b25Mb2FkaW5nKHN1Ym1pdEJ1dHRvbiwgXCJTYXZpbmcuLi5cIik7XG5cbiAgY29uc3QgbmV3Q2FyZERhdGEgPSB7XG4gICAgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLFxuICAgIGxpbms6IGxpbmtJbnB1dC52YWx1ZSxcbiAgfTtcblxuICBhcGlcbiAgICAucG9zdE5ld0NhcmQobmV3Q2FyZERhdGEpXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICBjYXJkc0xpc3QucHJlcGVuZChjcmVhdGVDYXJkRWxlbWVudChjYXJkRGF0YSwgY3VycmVudFVzZXIpKTtcbiAgICAgIGFkZENhcmRGb3JtLnJlc2V0KCk7XG4gICAgICByZXNldFZhbGlkYXRpb24oYWRkQ2FyZEZvcm0sIHNldHRpbmdzKTtcbiAgICAgIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgbmV3IHBvc3Q6XCIsIGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZXNldEJ1dHRvblRleHQoc3VibWl0QnV0dG9uLCBcIlNhdmVcIik7XG4gICAgfSk7XG59KTtcblxuLy8gPT09IENBUkQgREVMRVRJT04gPT09XG5kZWxldGVDb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChjYXJkVG9EZWxldGUpIHtcbiAgICBjb25zdCBjYXJkSWQgPSBjYXJkVG9EZWxldGUuZGF0YXNldC5jYXJkSWQ7XG5cbiAgICBzZXRCdXR0b25Mb2FkaW5nKGRlbGV0ZUNvbmZpcm1CdXR0b24sIFwiRGVsZXRpbmcuLi5cIik7XG5cbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZFRvRGVsZXRlLnJlbW92ZSgpO1xuICAgICAgICBjYXJkVG9EZWxldGUgPSBudWxsO1xuICAgICAgICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgY2FyZDpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlc2V0QnV0dG9uVGV4dChkZWxldGVDb25maXJtQnV0dG9uLCBcIkRlbGV0ZVwiKTtcbiAgICAgIH0pO1xuICB9XG59KTtcblxuXG5kZWxldGVDYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2FyZFRvRGVsZXRlID0gbnVsbDtcbiAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5JVElBTElaQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKFtuYW1lLCBhYm91dF0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHBvc3ROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkRGF0YSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVVc2VyQXZhdGFyKGF2YXRhckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyRGF0YSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbi8vIGV4cG9ydCB0aGUgY2xhc3NcbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZGlzYWJsZUJ1dHRvbiIsImJ1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImFkZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJlbmFibGVCdXR0b24iLCJyZXNldFZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImRvY3VtZW50Iiwic3JjIiwibG9nbyIsImF2YXRhciIsImVkaXRJY29uIiwicGx1c0ljb24iLCJlZGl0SWNvbkxpZ2h0IiwiYXBpIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwidGhpcyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImdldEFwcEluZm8iLCJQcm9taXNlIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJlZGl0VXNlckluZm8iLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3ROZXdDYXJkIiwiY2FyZERhdGEiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsInVwZGF0ZVVzZXJBdmF0YXIiLCJhdmF0YXJEYXRhIiwiYXV0aG9yaXphdGlvbiIsImN1cnJlbnRVc2VyIiwiY2FyZFRvRGVsZXRlIiwicXMiLCJzZWxlY3RvciIsInBhcmVudCIsInNldEJ1dHRvbkxvYWRpbmciLCJidXR0b24iLCJsb2FkaW5nVGV4dCIsInJlc2V0QnV0dG9uVGV4dCIsIm9yaWdpbmFsVGV4dCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUVzY2FwZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0dXBNb2RhbENsb3NlIiwiZSIsInRhcmdldCIsImNsb3NlQWxsTW9kYWxzIiwia2V5IiwiZWRpdFByb2ZpbGVNb2RhbCIsIm5ld1Bvc3RNb2RhbCIsInByZXZpZXdNb2RhbCIsImF2YXRhck1vZGFsIiwiZGVsZXRlTW9kYWwiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVGb3JtIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUF2YXRhciIsImF2YXRhckJ1dHRvbiIsImF2YXRhckZvcm0iLCJhdmF0YXJJbnB1dCIsIm5ld1Bvc3RCdXR0b24iLCJhZGRDYXJkRm9ybSIsImxpbmtJbnB1dCIsImNhcHRpb25JbnB1dCIsImRlbGV0ZUNvbmZpcm1CdXR0b24iLCJkZWxldGVDYW5jZWxCdXR0b24iLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZHNMaXN0IiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJ1c2VySW5mbyIsImNhcmQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJsaWtlQnV0dG9uIiwiZGVsZXRlQnV0dG9uIiwibGluayIsImFsdCIsImRhdGFzZXQiLCJfaWQiLCJjb250YWlucyIsInVwZGF0ZWRDYXJkIiwibGlrZXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInByZXZpZXdJbWFnZSIsInByZXZpZXdDYXB0aW9uIiwiY2FyZHMiLCJhcHBlbmQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0QnV0dG9uIiwiZmluYWxseSIsInJlc2V0IiwibmV3Q2FyZERhdGEiLCJwcmVwZW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=